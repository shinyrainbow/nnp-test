generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  clerkId   String   @unique
  email     String?  @unique
  firstName String?
  lastName  String?
  name      String?
  imageUrl  String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

enum PropertyStatus {
  available
  sold
  rented
  pending
}

enum RoomType {
  Condo
  Townhouse
  SingleHouse
  Apartment
  Other
}

model Project {
  id                 String   @id @default(uuid())
  projectCode        Int   @unique 

  projectNameEn      String
  projectNameTh      String?
  projectDescriptionEn String?
  projectDescriptionTh String?

  projectLocation    String[] @default([]) // ["Phetchaburi", "Makkasan", "Bangkok"]
  projectImageUrl    String[] @default([]) // main building, facilities, etc.
  projectFacilities  String[] @default([]) // list of facilities like "swimming pool", "gym", etc.
 
  addressNumberRoad  String? // 42 Sukhumvit 101/1
  addressSubDistrict String? // Makkasan
  addressDistrict    String?
  addressProvince    String?
  addressZipcode     String?
 
  completeYear       String? // January 2023
  distanceToStation  String[]   @default([]) // ["300m to BTS Ekamai", "400m to MRT Thonglor"]
  priceRange         String? // "1.5M - 3.5M THB"
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  // Relation
  properties Property[]
}

model Property {
  id                  String @id @default(uuid())
  projectPropertyCode String? @unique // RHB-1 (project-number) for agent

  // status
  status        PropertyStatus? @default(pending)
  whenAvailable     String?
  isAcceptShortTerm Boolean? @default(false)

  // details
  addressNumber String? // 42/188
  bedRoom       Int?
  bathRoom      Int?
  roomSize      Float? // in sqm
  floor         Int?
  building      String?
  roomType      RoomType?       @default(Condo)
  isPetFriendly Boolean? @default(false)
  carPark       Int?
  imageUrls     String[] @default([])
  roomAmenities String[] @default([])

  // price
  rentalRate    Decimal?        @db.Decimal(12, 2)
  sellPrice     Decimal?        @db.Decimal(14, 2)

  // contact
  phone  String?
  lineId String?
  fbUrl  String?
  
  isOwner       Boolean? @default(false)
  postUserFb    String?

  // messages
  note          String? // for some more details
  originalMessage String?
  messageToPost String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relation
  projectCode         Int @unique
  project Project @relation(fields: [projectCode], references: [projectCode])
}
